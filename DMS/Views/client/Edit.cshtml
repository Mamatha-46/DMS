@model DMS.Models.prospectviewmodel

@{
    ViewData["Title"] = "Edit";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<h1>Edit</h1>

<head>
    <link rel="stylesheet" href="~/css/css/StyleSheet1.css" />


</head>
<h4>Prospect</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="Edit">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="Id" />
            <div class="container">


                <div class="box">
                    <label asp-for="Name" class="control-label"> Prospect Name</label>
                    <input asp-for="Name" class="form-control" />
                    <span asp-validation-for="Name" class="text-danger"></span>

                </div>

                @*<div class="box">

                        <label asp-for="IndustryType" class="control-label"></label>
                        @Html.DropDownList("IndustryType", ViewData["IndustryType"] as SelectList, new { @class = "form-control" })
                        <span asp-validation-for="IndustryType" class="text-danger"></span>
                    </div>*@
                <div class="box">
                    <label asp-for="CountryName" class="control-label">Country</label>
                    @Html.DropDownList("CountryName", ViewData["CountryName"] as SelectList, new { @class = "form-control" })
                    <span asp-validation-for="CountryName" class="text-danger"></span>

                </div>

                <div class="box">

                    <label asp-for="State" class="control-label">State/Religion/Provience</label>
                    @Html.DropDownList("State", ViewData["State"] as SelectList, new { @class = "form-control" })
                    <span asp-validation-for="State" class="text-danger"></span>
                </div>
                <div class="box">
                    <label asp-for="City" class="control-label">City</label>
                    @Html.DropDownList("City", ViewData["City"] as SelectList, new { @class = "form-control" })
                    <span asp-validation-for="City" class="text-danger"></span>
                </div>

                <div class="box">

                    <label asp-for="Zip" class="control-label">ZipCode</label>
                    <input asp-for="Zip" class="form-control" />
                    <span asp-validation-for="Zip" class="text-danger"></span>
                </div>
                <div class="box">
                    <label asp-for="Email" class="control-label">EmailId</label>
                    <input asp-for="Email" class="form-control" />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>

                <div class="box">

                    <label asp-for="Number" class="control-label">Phone/Mobile</label>
                    <input asp-for="Number" class="form-control" />
                    <span asp-validation-for="Number" class="text-danger"></span>

                </div>
                <div class="box">
                    <label asp-for="Address1" class="control-label">Address1</label>
                    <textarea asp-for="Address1" class="form-control"></textarea>
                    <span asp-validation-for="Address1" class="text-danger"></span>

                </div>

                <div class="box">

                    <label asp-for="Address2" class="control-label">Address2</label>
                    <textarea asp-for="Address2" class="form-control"></textarea>
                    <span asp-validation-for="Address2" class="text-danger"></span>
                </div>
                <div class="box">
                    <label asp-for="Province" class="control-label">Province</label>
                    <input asp-for="Province" class="form-control" />
                    <span asp-validation-for="Province" class="text-danger"></span>
                </div>

                <div class="box">

                    <label asp-for="CPerson" class="control-label">ContactPerson</label>
                    <input asp-for="CPerson" class="form-control" />
                    <span asp-validation-for="CPerson" class="text-danger"></span>
                </div>
                <div class="box">
                    <label asp-for="Website" class="control-label">Website</label>
                    <input asp-for="Website" class="form-control" />
                    <span asp-validation-for="Website" class="text-danger"></span>
                </div>

                <div class="box">

                    <label asp-for="Logo" class="control-label">Logo</label>
                    <input asp-for="Logo" type="file" class="form-control-file" />
                    <span asp-validation-for="Logo" class="text-danger"></span>
                </div>
                <div class="box">
                    <label asp-for="Gst" class="control-label">Gst</label>
                    <input asp-for="Gst" class="form-control" />
                    <span asp-validation-for="Gst" class="text-danger"></span>
                </div>

                <div class="box">

                    <label asp-for="Source" class="control-label">Source</label>
                    <select asp-for="Source" class="form-control">
                        <option value="">---Select--- </option>
                        <option value="Referral">Referral</option>
                        <option value="Email">Email</option>
                        <option value="Instagram">Instagram</option>
                        <option value="SocialMedia">SocialMedia</option>
                        <option value="WebSite">WebSite</option>
                        <option value="LinkedIn">LinkedIn</option>
                        <option value="TechJockey">TechJockey</option>
                        <option value="OwnDatabase">OwnDatabase</option>
                    </select>
                    <span asp-validation-for="Source" class="text-danger"></span>
                </div>
                <div id="box">
                    <label asp-for="LeadType" class="control-label">LeadType</label>
                    <select asp-for="LeadType" class="form-control">
                        <option value="">---Select--- </option>
                        <option value="Cold Lead">Cold Lead</option>
                        <option value="Warm Lead">Warm Lead</option>
                        <option value="Hot Lead">Hot Lead</option>
                    </select>
                    <span asp-validation-for="LeadType" class="text-danger"></span>
                </div>

                <div id="box">

                    <label asp-for="ProsType" class="control-label">Status</label>
                    <input asp-for="ProsType" class="form-control" />
                    <span asp-validation-for="ProsType" class="text-danger"></span>
                </div>
                <div id="box">
                    <label asp-for="Terms" class="control-label">Terms/conditions</label>
                    <textarea asp-for="Terms" class="form-control tinymce"></textarea>
                    <span asp-validation-for="Terms" class="text-danger"></span>

                </div>

            </div>
            @*<div class="form-group">
                    <label asp-for="Bank" class="control-label"></label>
                    <input asp-for="Bank" class="form-control" />
                    <span asp-validation-for="Bank" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="AddedOn" class="control-label"></label>
                    <input asp-for="AddedOn" class="form-control" />
                    <span asp-validation-for="AddedOn" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="AddedId" class="control-label"></label>
                    <input asp-for="AddedId" class="form-control" />
                    <span asp-validation-for="AddedId" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="AddedBy" class="control-label"></label>
                    <input asp-for="AddedBy" class="form-control" />
                    <span asp-validation-for="AddedBy" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="UpdatedBy" class="control-label"></label>
                    <input asp-for="UpdatedBy" class="form-control" />
                    <span asp-validation-for="UpdatedBy" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="UpdatedId" class="control-label"></label>
                    <input asp-for="UpdatedId" class="form-control" />
                    <span asp-validation-for="UpdatedId" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="AReaded" class="control-label"></label>
                    <input asp-for="AReaded" class="form-control" />
                    <span asp-validation-for="AReaded" class="text-danger"></span>
                </div>*@
            <div class="form-group">

                <div class="input-group">

                    <div class="input-group-append">
                        <button type="button" class="btn btn-primary" id="add-file-btn">Add File</button>



                    </div>
                </div>
            </div>
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>




<table>
    <tr>
        <th>Product</th>
        <th>Discount</th>
        <th>Estimated Qty</th>
        <th>Unit Price</th>
        <th>After Discount</th>
        <th>Stage</th>
        <th>Date</th>
        <th>Comments</th>
    </tr>
    @foreach (var item in ViewBag.ProspectProducts)
    {
        <tr>
            <td>@item.ProductId</td>
            <td>@item.Discount</td>
            <td>@item.EQty</td>
            <td>@item.UPrice</td>

            <td>@item.STotal</td>
            <td>@item.Date.ToShortDateString()</td>
            <td>@item.Comments</td>
        </tr>

    }
</table>



<div>
    <a asp-action="Index">Back to List</a>
</div>

<script>

    $(document).ready(function () {
        // Get the product data from the controller method
        $.ajax({
            url: '/Prospects/GetprospectsLoopdetailbyId',
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                alert(data)
                // Update the input fields with the data
                $('#id_productname').val(data.productName);
                $('#id_discount').val(data.discount);
                $('#id_estimated').val(data.estimatedQuantity);
                $('#id_unitprice').val(data.unitPrice);
                $('#id_afterdiscount').val(data.afterDiscount);

                // Update the table with the stage data
                var stageData = data.stageData;
                $.each(stageData, function (index, value) {
                    var newRow = '<tr><td>' + value.stageNo + '</td><td>' + value.stageName + '</td><td>' + value.date + '</td><td>' + value.comments + '</td><td><a class="btn btn-primary btn-outline btn-sm updateStage" adddata="' + value.id + '" button="table"><i class="fa fa-plus"></i>Add Stage</a></td></tr>';
                    /*        $('#prosDCold_83 tbody').append(newRow);*/
                });
            },
            error: function (xhr, textStatus, errorThrown) {
                alert('Error: ' + errorThrown);
            }
        });
    });

</script>

